<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Calendario dell'Avvento ‚Äì Classico</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    :root{
      --card-radius: 18px;
      --shadow-soft: 0 10px 25px rgba(15, 23, 42, 0.18);
      --accent: #f97316;
      --lock-bg: rgba(15,23,42,0.65);
    }

    * {
      box-sizing: border-box;
    }

/* NEVE */
.snowflake {
  position: fixed;
  top: -10px;
  color: #fff;
  font-size: 12px;
  pointer-events: none;
  opacity: 0.9;
  z-index: 99999;
  animation: fall linear infinite;
}

@keyframes fall {
  0%   { transform: translateY(0) rotate(0deg); }
  100% { transform: translateY(100vh) rotate(360deg); }
}

    /* Sfondo 1 (di base) */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: url("img/sfondo_1.jpg") center/cover no-repeat fixed;
      z-index: -2;
      opacity: 1;
      transition: opacity 0.8s ease;
    }

    /* Sfondo 2 (sopra, inizialmente nascosto) */
    body::after {
      content: "";
      position: fixed;
      inset: 0;
      background: url("img/sfondo_2.jpg") center/cover no-repeat fixed;
      z-index: -1;
      opacity: 0;
      transition: opacity 0.8s ease;
    }

    /* Quando aggiungiamo .bg-2 il secondo sfondo appare con sfumatura */
    body.bg-2::before {
      opacity: 0;
    }

    body.bg-2::after {
      opacity: 1;
    }

    body {
      margin:0;
      min-height:100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:#f3f4f6;
      color:#111827;
      display:flex;
      justify-content:center;
      padding:24px 12px 40px;
    }

    .page-container{
      position:relative;
      max-width:1100px;
      width:100%;
      border-radius:24px;
      box-shadow:0 18px 40px rgba(15,23,42,0.18);
      padding:24px 16px 32px;
    }

    .page-title{
      text-align:center;
      margin:0 0 6px;
      font-size:28px;
      font-weight:800;
      letter-spacing:0.05em;
      text-transform:uppercase;
    }

    .page-subtitle{
      text-align:center;
      margin:0 0 24px;
      font-size:14px;
      color:#6b7280;
    }

    /* Griglia 5x5 */
    .calendar-grid{
      display:grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      justify-content:center;
      gap:18px;
      padding:8px;
    }

    .box-wrapper{
      display:flex;
      justify-content:center;
    }

    .day-box{
      position:relative;
      width:150px;
      height:150px;
      border-radius:18px;
      overflow:hidden;
      background:#ffffff;
      box-shadow:0 10px 25px rgba(15, 23, 42, 0.18);
      cursor:pointer;
      transition: transform .2s ease, box-shadow .2s ease;
      border:4px solid #ffffff;
      box-sizing:border-box;
    }

    .day-box img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      transition: filter .25s ease, transform .25s ease, opacity .25s ease;
    }

    .day-box:hover{
      transform: translateY(-2px);
      box-shadow:0 16px 30px rgba(15,23,42,0.22);
    }

    .day-box:hover img{
      transform:scale(1.03);
    }

/* Badge NEW per il giorno attivo */
.day-new-badge {
  position: absolute;
  top: 6px;
  right: 6px;
  background: #facc15;         /* oro */
  color: #111;
  font-weight: 700;
  font-size: 12px;
  padding: 3px 7px;
  border-radius: 10px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.25);
  z-index: 3;
  animation: new-badge-pulse 1.4s infinite ease-in-out;
}

.day-open-badge {
  position: absolute;
  top: 6px;
  right: 6px;
  background: #4ade80;      /* verde ‚Äúaperto‚Äù */
  color: #111;
  font-weight: 700;
  font-size: 12px;
  padding: 3px 7px;
  border-radius: 10px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.25);
  z-index: 3;
}

@keyframes new-badge-pulse {
  0%   { transform: scale(1); }
  50%  { transform: scale(1.15); }
  100% { transform: scale(1); }
}

    .day-box-25{
      box-shadow:0 0 0 rgba(0,0,0,0);
      border:4px solid rgba(234,179,8,0.8);
    }

    /* Bloccati: blur + stella */
    .day-box-locked{
      cursor:not-allowed;
    }

    .day-box-locked img{
      filter: blur(3px) brightness(0.92);
    }

    .day-box-locked::after{
      content:"‚≠ê";
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:34px;
      background:linear-gradient(to bottom, rgba(15,23,42,0.2), var(--lock-bg));
      color:#f9fafb;
      text-shadow:0 2px 6px rgba(0,0,0,0.6);
      z-index:2;
    }

/* ‚≠ê Stella dorata solo per il giorno corrente */
.day-box-locked.current-day::after {
  color: #facc15 !important;
  text-shadow: 0 0 12px rgba(250, 204, 21, 0.8);
}
    
    /* ‚≠ê Stella del giorno corrente con colore diverso */
.day-box-locked.current-day::after {
  color: #facc15 !important;   /* colore oro */
  text-shadow: 0 0 12px rgba(250, 204, 21, 0.8);
}

    /* ‚≠ê Animazione ‚Äúinvito‚Äù per la stella del giorno corrente */
    @keyframes current-star-pulse {
      0% {
        transform: scale(1) translateY(0);
        box-shadow: 0 0 10px rgba(250, 204, 21, 0.3);
      }
      50% {
        transform: scale(1.08) translateY(-2px);
        box-shadow: 0 0 20px rgba(250, 204, 21, 0.6);
      }
      100% {
        transform: scale(1) translateY(0);
        box-shadow: 0 0 10px rgba(250, 204, 21, 0.3);
      }
    }

    .day-box-locked.current-day::after{
      animation: current-star-pulse 1.6s ease-in-out infinite;
    }

    /* Tremolio per caselle bloccate (giorni futuri) */
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-4px); }
      40%, 80% { transform: translateX(4px); }
    }

    .day-box.shake {
      animation: shake 0.35s;
    }

    /* Rottura della stella (oggi) */
    @keyframes star-break {
      0% {
        transform: scale(1);
        opacity: 1;
      }
      100% {
        transform: scale(1.4) rotate(10deg);
        opacity: 0;
      }
    }

    .day-box-locked.breaking::after{
      animation: star-break 0.4s forwards;
    }

    /* Popup */
    .popup{
      display:none;
      position:fixed;
      inset:0;
      background:rgba(15,23,42,0.85);
      justify-content:center;
      align-items:center;
      padding:20px;
      z-index:9999;
    }

    .popup-content{
      background:rgba(255,255,255,0.96);
      border-radius:22px;
      max-width:420px;
      width:100%;
      padding:22px 20px 20px;
      box-shadow:0 18px 40px rgba(0,0,0,0.7);
      position:relative;
      text-align:center;
    }

    .popup-content img{
      width: 100%;
      height: auto;
      border-radius: 16px;
      margin-bottom: 14px;
    }

    .popup-day-label{
      font-size:13px;
      letter-spacing:.14em;
      text-transform:uppercase;
      color:#6b7280;
      margin-bottom:4px;
    }

    .popup-content h3{
      margin:4px 0 10px;
      font-size:20px;
      font-weight:700;
      color:#111827;
    }

    .popup-content p{
      margin:0 0 18px;
      font-size:15px;
      line-height:1.5;
      color:#374151;
    }

    .popup-close{
      position:absolute;
      top:10px;
      right:14px;
      font-size:26px;
      cursor:pointer;
      color:#9ca3af;
    }

    .popup-close:hover{
      color:#111827;
    }

    .cta-button{
      display:inline-block;
      padding:10px 18px;
      border-radius:999px;
      color:#fff;
      text-decoration:none;
      font-weight:600;
      background:var(--accent);
      border:none;
      transition:transform .15s ease, filter .15s ease;
    }

    .cta-button:hover{
      transform:translateY(-1px);
      filter:brightness(1.05);
    }

    /* Responsive */
    @media (max-width: 900px){
      .page-container{
        max-width:750px;
      }
      .calendar-grid{
        grid-template-columns: repeat(4, minmax(0, 1fr));
      }
    }

    @media (max-width: 600px){
      .page-container{
        max-width:480px;
      }
      .calendar-grid{
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
      .day-box{
        width:100px;
        height:100px;
      }
    }

    @media (max-width: 400px){
      .day-box{
        width:90px;
        height:90px;
      }
    }
    
/* Barra rossa con testo scorrevole */
.top-marquee {
  width: 100%;
  overflow: hidden;
  background: #00441C; /* verde Bar√≤ */
  padding: 10px 0;
  color: #fff;
  font-size: 17px;
  font-weight: 600;
  text-align: center;
  white-space: nowrap;
  z-index: 999;
}

/* Animazione scorrevole */
.top-marquee span {
  display: inline-block;
  padding-left: 100%;
  animation: slide-text 12s linear infinite;
}

@keyframes slide-text {
  0%   { transform: translateX(0); }
  100% { transform: translateX(-100%); }
}    
  </style>
</head>
<body>
  <div class="page-container">
        <!-- BANNER SCORREVOLE ROSSO -->
  <div class="top-marquee">
    <span> Ordina entro il 18/12/2025 per ricevere i tuoi regali di Natale in tempo!‚ú® </span>
  </div>

    <h1 class="page-title" style="color: white">  Calendario Avvento Bar√≤  </h1>
    <p class="page-subtitle" style="color: white"> üí´ La skincare che ami, in un viaggio esclusivo verso il Natale. </p>
    <h1 class="page-title"> </h1>
    <p class="page-subtitle"> </p>

    <div id="calendar" class="calendar-grid"></div>
  </div>

  <script>
    // Config giorni
    // Piccole: img/DEC_1.jpg ... img/DEC_25.jpg
    // Grandi:  img/1_BIG.jpg  ... img/25_BIG.jpg
    // unlockDate in formato YYYY-MM-DD
    const days = [
      { day: 1,  imgSmall: 'img/DEC_1.jpg',  imgBig: 'img/1_BIG.png',  title: '',  text: '',  link: 'https://wow4.me/0be281a6', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/01/2025' },
      { day: 2,  imgSmall: 'img/DEC_2.jpg',  imgBig: 'img/2_BIG.jpg',  title: '',  text: '',  link: 'https://wow4.me/04c864b7', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/02/2025' },
      { day: 3,  imgSmall: 'img/DEC_3.jpg',  imgBig: 'img/3_BIG.jpg',  title: '',  text: '',  link: 'https://wow4.me/921a31a1', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/03/2025' },
      { day: 4,  imgSmall: 'img/DEC_4.jpg',  imgBig: 'img/4_BIG.jpg',  title: '',  text: '',  link: 'https://wow4.me/b4f9d1d9', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/04/2025' },
      { day: 5,  imgSmall: 'img/DEC_5.jpg',  imgBig: 'img/5_BIG.jpg',  title: '',  text: '',  link: 'https://wow4.me/dbb7ed71', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/05/2025' },
      { day: 6,  imgSmall: 'img/DEC_6.jpg',  imgBig: 'img/6_BIG.jpg',  title: '',  text: '',  link: 'https://wow4.me/5ed1fa49', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/06/2025' },
      { day: 7,  imgSmall: 'img/DEC_7.jpg',  imgBig: 'img/6_BIG.jpg',  title: '',  text: '',  link: 'https://wow4.me/d95ffffd', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/07/2025' },
      { day: 8,  imgSmall: 'img/DEC_8.jpg',  imgBig: 'img/8_BIG.jpg',  title: '',  text: '',  link: 'https://wow4.me/53889d59', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/08/2025' },
      { day: 9,  imgSmall: 'img/DEC_9.jpg',  imgBig: 'img/9_BIG.jpg',  title: '',  text: '',  link: 'https://wow4.me/fda84234', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/09/2025' },
      { day: 10, imgSmall: 'img/DEC_10.jpg', imgBig: 'img/10_BIG.jpg', title: '',  text: '', link: 'https://wow4.me/183b2ba4', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/10/2025' },
      { day: 11, imgSmall: 'img/DEC_11.jpg', imgBig: 'img/11_BIG.jpg', title: '',  text: '', link: 'https://wow4.me/c5839e14', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/11/2025' },
      { day: 12, imgSmall: 'img/DEC_12.jpg', imgBig: 'img/12_BIG.jpg', title: '',  text: '', link: 'https://wow4.me/8d533ad5', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/12/2025' },
      { day: 13, imgSmall: 'img/DEC_13.jpg', imgBig: 'img/13_BIG.jpg', title: '',  text: '', link: 'https://wow4.me/b7b16fd6', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/13/2025' },
      { day: 14, imgSmall: 'img/DEC_14.jpg', imgBig: 'img/14_BIG.jpg', title: '',  text: '', link: 'https://wow4.me/38912722', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/14/2025' },
      { day: 15, imgSmall: 'img/DEC_15.jpg', imgBig: 'img/2_BIG.jpg', title: '',  text: '', link: 'https://wow4.me/fd7a513d', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/15/2025' },
      { day: 16, imgSmall: 'img/DEC_16.jpg', imgBig: 'img/3_BIG.jpg', title: '',  text: '', link: 'https://wow4.me/7e4dc185', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/16/2025' },
      { day: 17, imgSmall: 'img/DEC_17.jpg', imgBig: 'img/4_BIG.jpg', title: '',  text: '', link: 'https://wow4.me/5ad99f62', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/17/2025' },
      { day: 18, imgSmall: 'img/DEC_18.jpg', imgBig: 'img/5_BIG.jpg', title: '',  text: '', link: 'https://wow4.me/ac20b831', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/18/2025' },
      { day: 19, imgSmall: 'img/DEC_19.jpg', imgBig: 'img/6_BIG.jpg', title: '',  text: '', link: 'https://wow4.me/6cd259fb', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/19/2025' },
      { day: 20, imgSmall: 'img/DEC_20.jpg', imgBig: 'img/7_BIG.jpg', title: '',  text: '', link: 'https://wow4.me/4041a2f9', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/20/2025' },
      { day: 21, imgSmall: 'img/DEC_21.jpg', imgBig: 'img/8_BIG.jpg', title: '',  text: '', link: 'https://wow4.me/49cabe88', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/21/2025' },
      { day: 22, imgSmall: 'img/DEC_22.jpg', imgBig: 'img/22_BIG.jpg', title: '',  text: '', link: 'https://wow4.me/5ed260e5', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/22/2025' },
      { day: 23, imgSmall: 'img/DEC_23.jpg', imgBig: 'img/23_BIG.jpg', title: '',  text: '', link: 'https://wow4.me/61017520', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/23/2025' },
      { day: 24, imgSmall: 'img/DEC_24.jpg', imgBig: 'img/24_BIG.jpg', title: '',  text: '', link: 'https://wow4.me/37c40da6', ctaLabel: 'Scopri di pi√π',     ctaColor: '#691b32', unlockDate: '12/24/2025' },
      { day: 25, imgSmall: 'img/DEC_25.jpg', videoUrl:"https://www.youtube.com/embed/4o9pxq-VWo0?autoplay=1&mute=1", title: '',  text: '', link: '#', ctaLabel: 'Auguri da Bar√≤ Cosmetics', ctaColor: '#691b32', unlockDate: '12/24/2025' }
    ];

    function normalizeDate(dateInput){
      const d = new Date(dateInput);
      d.setHours(0,0,0,0);
      return d;
    }

    function isFutureDate(dateStr){
      const today = normalizeDate(new Date());
      const unlock = normalizeDate(dateStr);
      return unlock > today;
    }

    function isTodayDate(dateStr){
      const today = normalizeDate(new Date());
      const unlock = normalizeDate(dateStr);
      return unlock.getTime() === today.getTime();
    }

    function openPopup(id){
      const el = document.getElementById(id);
      if(el){ el.style.display = "flex"; }
    }

    function closePopup(el){
      el.style.display = "none";
    }

function createDayBox(day){
  const isFuture = isFutureDate(day.unlockDate);
  const isToday  = isTodayDate(day.unlockDate);

  const wrapper = document.createElement('div');
  wrapper.className = 'box-wrapper';

  const box = document.createElement('div');
  box.className = 'day-box';
  if(day.day === 25) box.classList.add('day-box-25');
  if(isFuture || isToday) box.classList.add('day-box-locked');

  // immagine piccola
  const img = document.createElement('img');
  img.src = day.imgSmall;
  img.alt = day.title;
  box.appendChild(img);

  // bollino numero
  const badge = document.createElement('div');
  badge.className = 'day-badge';
  badge.textContent = day.day;
  box.appendChild(badge);

  // ‚≠ê NEW badge SOLO nel giorno corrente
  if (isToday) {
    const newBadge = document.createElement('div');
    newBadge.className = 'day-new-badge';
    newBadge.textContent = "NEW";
    box.appendChild(newBadge);
  }

  // --- CLICK HANDLING ---
  if(isFuture){
    // Giorno futuro ‚Üí tremolio
    box.addEventListener('click', () => {
      box.classList.add('shake');
      setTimeout(() => box.classList.remove('shake'), 400);
    });

} else if(isToday){
  // Giorno corrente ‚Üí animazione, popup e cambio badge NEW ‚Üí OPEN
  box.style.cursor = "pointer";
  box.addEventListener('click', () => {
    box.classList.add('breaking');

    setTimeout(() => {
      box.classList.remove('day-box-locked');
      box.classList.remove('breaking');

      // ‚≠ê Cambia NEW ‚Üí OPEN
      const newBadge = box.querySelector(".day-new-badge");
      if (newBadge) {
        newBadge.classList.remove("day-new-badge");
        newBadge.classList.add("day-open-badge");
        newBadge.textContent = "OPEN";
      }

      openPopup('popup' + day.day);

      if(day.day === 10){
        document.body.classList.add('bg-2');
      }
    }, 350);
  });


  } else {
    // Giorno passato ‚Üí si apre normalmente
    box.addEventListener('click', () => {
      openPopup('popup' + day.day);
      if(day.day === 10){
        document.body.classList.add('bg-2');
      }
    });
  }

  wrapper.appendChild(box);
  return wrapper;
}

  function createPopup(day){
  const popup = document.createElement('div');
  popup.className = 'popup';
  popup.id = 'popup'+day.day;
  popup.onclick = function(){ closePopup(this); };

  const content = document.createElement('div');
  content.className = 'popup-content';
  content.onclick = function(e){ e.stopPropagation(); };

  const close = document.createElement('div');
  close.className = 'popup-close';
  close.innerHTML = '&times;';
  close.onclick = function(e){
    e.stopPropagation();
    popup.style.display = 'none';
  };

  const label = document.createElement('div');
  label.className = 'popup-day-label';
  label.textContent = 'Giorno ' + day.day;

  // üî• GESTIONE VIDEO O IMMAGINE
  if (day.videoUrl) {
    // Video YouTube (giorno 25)
    const iframe = document.createElement('iframe');
    iframe.src = day.videoUrl;
    iframe.width = "100%";
    iframe.height = "230";
    iframe.style.borderRadius = "16px";
    iframe.style.border = "none";
    iframe.allow = "accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture";
    iframe.allowFullscreen = true;
    content.appendChild(iframe);

  } else {
    // Immagine classica
    const img = document.createElement('img');
    img.src = day.imgBig;
    img.alt = day.title;
    content.appendChild(img);
  }

  const h3 = document.createElement('h3');
  h3.textContent = day.title;

  const p = document.createElement('p');
  p.textContent = day.text;

  const a = document.createElement('a');
  a.href = day.link;
  a.target = '_blank';
  a.className = 'cta-button';
  a.textContent = day.ctaLabel;
  a.style.background = day.ctaColor;

  a.addEventListener('click', () => {
    popup.style.display = 'none';
  });

  content.appendChild(close);
  content.appendChild(label);
  content.appendChild(h3);
  content.appendChild(p);
  content.appendChild(a);
  popup.appendChild(content);

  document.body.appendChild(popup);
}

    function renderCalendar(){
      const grid = document.getElementById('calendar');
      days.forEach(day => {
        grid.appendChild(createDayBox(day));
        createPopup(day);
      });
    }

    renderCalendar();
    
// CREA NEVE ‚ùÑÔ∏è
function createSnow() {
  const snow = document.createElement("div");
  snow.classList.add("snowflake");
  snow.textContent = "‚ùÑ";

  // posizione casuale
  snow.style.left = Math.random() * window.innerWidth + "px";

  // dimensione casuale
  const size = (Math.random() * 12) + 8;
  snow.style.fontSize = size + "px";

  // durata caduta casuale
  const duration = (Math.random() * 4) + 3;
  snow.style.animationDuration = duration + "s";

  document.body.appendChild(snow);

  // elimina fiocco dopo caduta
  setTimeout(() => {
    snow.remove();
  }, duration * 1000);
}

// genera neve ogni 150ms
setInterval(createSnow, 150);
</script>

    
    
  </script>
</body>
</html>
